# cLan - awesome UI

The files in `src/api` are autogenerated from the openapi.json. The openapi.json comes from the backend, from fastapi which autogenerates the openapi.json file from the python code.

We then use orval to generate typescript files to `src/api`

## Build Development Web UI

To build the dev web ui with hotreloading

```bash
npm run dev
```

## Build release Web UI

To build the release version execute

```bash
npm run build
```

## Updating dependencies

After changing dependencies with

`npm <dep> i --package-lock-only`

Update floco dependencies:

`nix run github:aakropotkin/floco -- translate -pt -o ./nix/pdefs.nix`

The prettier tailwind class sorting is not yet working properly with our devShell integration.

To sort classnames manually:

`cd /clan-core/pkgs/ui/`

## Troubleshooting

Sometimes new endpoints don't appear in `src/api`. Delete the `ui/openapi.json` file and execute `direnv reload`
